
.. note:: WARNING WARNING WARNING:  This is the Digital Rebar v2 product documentation.  The v2 version is EOL as of September 2017.  Please refer to the new Digital Rebar Provision v3 documentation:  http:\/\/provision.readthedocs.io\/en\/tip\/README.html

.. index::
  pair: Deployment; API

.. _api_deployment:

Deployment APIs
~~~~~~~~~~~~~~~

Deployment Routes
^^^^^^^^^^^^^^^^^

+--------+-------------------------------------------------------+-----------+-----------------------------------------------------------+------------+
| Verb   | URL                                                   | Options   | Returns/Comments                                          | Nothing    |
+========+=======================================================+===========+===========================================================+============+
| GET    | /api/v2/deployments                                   | none      | Deployment List                                           | -          |
+--------+-------------------------------------------------------+-----------+-----------------------------------------------------------+------------+
| POST   | /api/v2/deployments                                   | none      | New Deployment                                            | -          |
+--------+-------------------------------------------------------+-----------+-----------------------------------------------------------+------------+
| GET    | /api/v2/deployments/[:id]                             | none      | Existing Deployment Detail                                | -          |
+--------+-------------------------------------------------------+-----------+-----------------------------------------------------------+------------+
| PUT    | /api/v2/deployments/[:id]                             | none      | Update Deployment Detail                                  | -          |
+--------+-------------------------------------------------------+-----------+-----------------------------------------------------------+------------+
| GET    | /api/v2/deployments/[:id]                             | none      | Existing Deployment Detail                                | -          |
+--------+-------------------------------------------------------+-----------+-----------------------------------------------------------+------------+
| PUT    | /api/v2/deployments/[:id]/commit                      | none      | Commit Proposed                                           | -          |
+--------+-------------------------------------------------------+-----------+-----------------------------------------------------------+------------+
| PUT    | /api/v2/deployments/[:id]/propose                     | none      | Create an new Proposal based on Active                    | -          |
+--------+-------------------------------------------------------+-----------+-----------------------------------------------------------+------------+
| PUT    | /api/v2/deployments/[:id]/transition                  | none      | Send Transition Data into the system                      | -          |
+--------+-------------------------------------------------------+-----------+-----------------------------------------------------------+------------+
| PUT    | /api/v2/deployments/[:id]/redeploy                    | none      | Redeploy all nodes in Deployment (see note)               | -          |
+--------+-------------------------------------------------------+-----------+-----------------------------------------------------------+------------+
| GET    | /api/v2/deployments/[:deployment\_id]/attribs         | none      | List Attribs for a specific deployment                    | -          |
+--------+-------------------------------------------------------+-----------+-----------------------------------------------------------+------------+
| GET    | /api/v2/deployments/[:deployment\_id]/attribs/[:id]   | none      | Show Attrib (including value) for a specific Deployment   | -          |
+--------+-------------------------------------------------------+-----------+-----------------------------------------------------------+------------+
| PUT    | /api/v2/deployments/[:deployment\_id]/attribs/[:id]   | none      | Update Attrib                                             | -          |
+--------+-------------------------------------------------------+-----------+-----------------------------------------------------------+------------+

**Note**: For redeploy details, see :ref:`api_node` and :ref:`api_deployment_batch`


JSON fields
-----------

+---------------+----------------+------------+-----------------------------------------------------------+
| Attribute     | Type           | Settable   | Note                                                      |
+===============+================+============+===========================================================+
| System        | Boolean        | No         |                                                           |
+---------------+----------------+------------+-----------------------------------------------------------+
| Parent\_id    | Internal Ref   | ??         | Actually an Int                                           |
+---------------+----------------+------------+-----------------------------------------------------------+
| Description   | String         | Yes        |                                                           |
+---------------+----------------+------------+-----------------------------------------------------------+
| Name          | String         | Yes        | Limited to Alpha + Numbers - no spaces or special chars   |
+---------------+----------------+------------+-----------------------------------------------------------+
| Created\_at   | String         | No         | Unicode - date format                                     |
+---------------+----------------+------------+-----------------------------------------------------------+
| Updated\_at   | String         | No         | Unicode - date format                                     |
+---------------+----------------+------------+-----------------------------------------------------------+

Minimum fields needed for create - name
